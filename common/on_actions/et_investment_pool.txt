on_monthly_pulse_country = {
	on_actions = {
		et_investment_pool_monthly
		et_admin_center_framework_monthly
	}
}

et_investment_pool_monthly = {
	effect = {
		if = {
			limit = {
				NOT = { has_journal_entry = et_treasury_investment_pool_transfer }
				OR = {
					investment_pool > 0
					gold_reserves > 0
				}
			}
			add_journal_entry = { type = et_treasury_investment_pool_transfer }
		}

		# Unique auto-transfer logic: keep 20% of gold reserves, move rest to investment pool
		if = {
			limit = {
				has_variable = et_auto_transfer_var
				gold_reserves > 0
			}
			# If above reserve, move surplus using script values
			if = {
				limit = { et_surplus_gold > 0 }
				add_investment_pool = et_surplus_gold
				add_treasury = et_surplus_gold_neg
			}
		}
	}
}

et_admin_center_framework_monthly = {
	effect = {
		if = {
			limit = {
				NOT = { has_journal_entry = et_je_admin_center_framework }
			}
			add_journal_entry = { type = et_je_admin_center_framework }
		}

		# Auto build logic if enabled
		if = {
			limit = { has_variable = et_auto_build_admin_enabled }
			et_ai_auto_build_government_administration = yes
		}
		if = {
			limit = { has_variable = et_auto_build_railway_enabled }
			et_ai_auto_build_railway = yes
		}
		if = {
			limit = { has_variable = et_auto_build_port_enabled }
			et_ai_auto_build_port = yes
		}
	}
}