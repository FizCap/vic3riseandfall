on_yearly_pulse = {
    on_actions = {
        protestant_reformation1
        protestant_reformation2
        force_colonialism
        force_colonialism_russia
        et_ottomans_rise
        et_castille_aragon_union
        et_ottomans_rise
    }
}

on_game_started_after_lobby = {
    on_actions = {
        japanese_shogunate_event1
        et_homeland_cleanup
    }
}

on_game_started = {
    on_actions = {
        holy_roman_emperor
        force_slavery_startup
    }
}

# --- Event Definitions ---

et_ottomans_rise = {
    trigger = { 
        year = 1445
        exists = c:TUR
        popup = yes
    }
    effect = {
        s:STATE_EASTERN_THRACE = {
            add_claim = c:TUR
        }
        s:STATE_NORTHERN_THRACE = {
            add_claim = c:TUR
        }
        s:STATE_ATTICA = {
            add_claim = c:TUR
        }
        s:STATE_PELOPONNESE = {
            add_claim = c:TUR
        }
        s:STATE_KONYA = {
            add_claim = c:TUR
        }
        s:STATE_ADANA = {
            add_claim = c:TUR
        }
        s:STATE_ANKARA = {
            add_claim = c:TUR
        }
        s:STATE_KASTAMONU = {
            add_claim = c:TUR
        }
        s:STATE_TRABZON = {
            add_claim = c:TUR
        }
        s:STATE_DIYARBAKIR = {
            add_claim = c:TUR
        }
        s:STATE_ALEPPO = {
            add_claim = c:TUR
        }
        s:STATE_SYRIA = {
            add_claim = c:TUR
        }
        s:STATE_LEBANON = {
            add_claim = c:TUR
        }
        s:STATE_CYPRUS = {
            add_claim = c:TUR
        }
        s:STATE_CRETE = {
            add_claim = c:TUR
        }
        s:STATE_EAST_AEGEAN_ISLANDS = {
            add_claim = c:TUR
        }
        c:TUR = {
            trigger_event = { id = et_ottomans.1 }
        }
        every_country = {
            limit = { NOT = { this = c:TUR } }
            trigger_event = { id = et_ottomans.1 }
        }
    }
}

protestant_reformation1 = {
    trigger = { year = 1518 }
    effect = {
        every_country = {
            limit = {
                OR = {
                    country_has_primary_culture = cu:british
                    country_has_primary_culture = cu:scottish
                    country_has_primary_culture = cu:norwegian
                    country_has_primary_culture = cu:swedish
                    country_has_primary_culture = cu:dutch
                    country_has_primary_culture = cu:danish
                }
            }
            add_modifier = {
                name = protestant_reformation_conversion_modifier
                days = 10950
            }
            set_state_religion = rel:protestant
            every_scope_state = {
                if = {
                    limit = { is_incorporated = yes }
                    convert_population = {
                        target = rel:protestant
                        value = 0.1
                    }
                }
            }
        }
        every_country = {
            limit = { is_player = yes }
            trigger_event = { id = et_protestant_reformation.1 }
        }
    }
}

protestant_reformation2 = {
    trigger = { year = 1518 }
    effect = {
        every_country = {
            limit = {
                OR = {
                    country_has_primary_culture = cu:south_german
                    country_has_primary_culture = cu:north_german
                }
                NOT = { this = c:U78 }
                NOT = { this = c:AUS }
            }
            custom_tooltip = protestant_reformation2_tt
            trigger_event = { id = et_protestant_reformation.2 }
        }
    }
}

force_colonialism = {
    trigger = { year = 1492 }
    effect = {
        every_country = {
            limit = { 
                OR = {
                    country_has_primary_culture = cu:british
                    country_has_primary_culture = cu:spanish
                    country_has_primary_culture = cu:portuguese
                    country_has_primary_culture = cu:french
                    country_has_primary_culture = cu:dutch
                }
            }
            activate_law = law_type:law_slave_trade
            activate_law = law_type:law_colonial_exploitation
            add_modifier = {
                name = ageofcolonialism_modfier
                years = 50
            }
        }
        every_country = {
            limit = { is_player = yes }
            trigger_event = { id = et_force_colonialism.1 }
        }
    }
}

force_colonialism_russia = {
    trigger = { year = 1581 }
    effect = {
        every_country = {
            limit = {
                country_has_primary_culture = cu:russian
            }
            activate_law = law_type:law_frontier_colonization
        }
        every_country = {
            limit = { is_player = yes }
            trigger_event = { id = et_force_colonialism.2 }
        }
    }
}

japanese_shogunate_event1 = {
    effect = {
        c:JAP = {
            trigger_event = jap_1444.1
            popup = yes
        }
    }
}

holy_roman_emperor = {
    effect = {
        c:AUS = {
            add_modifier = {
                name = holy_roman_emperor
                days = 17520
                is_decaying = yes
            }
        }
    }
}

force_slavery_startup = {
    effect = {
        every_country = {
            limit = {
                OR = {
                    country_has_state_religion = rel:ibadi
                    country_has_state_religion = rel:mutazila
                    country_has_state_religion = rel:quranist
                    country_has_state_religion = rel:alawite
                    country_has_state_religion = rel:zikri
                    country_has_state_religion = rel:kharijite
                    country_has_state_religion = rel:druze
                    country_has_state_religion = rel:qarmatian
                    country_has_state_religion = rel:masmudi
                    country_has_state_religion = rel:sunni
                    country_has_state_religion = rel:shiite
                    any_scope_state = { is_capital = yes region = sr:region_indonesia }
                    any_scope_state = { is_capital = yes region = sr:region_indochina }
                }
            }
            activate_law = law_type:law_slave_trade
        }
    }
}

et_castille_aragon_union = {
    trigger = {
        year = 1479
        exists = c:CAS
        exists = c:X22
        NOT = { is_player = c:X22 }
    }
    effect = {
        c:CAS = {
            create_diplomatic_pact = {
                country = c:X22
                type = personal_union
            }
            trigger_event = { id = et_castille_aragon.1 }
        }
        c:X22 = {
            trigger_event = { id = et_castille_aragon.1 }
        }
        every_country = {
            limit = { AND = { NOT = { this = c:CAS } NOT = { this = c:X22 } } }
            trigger_event = { id = et_castille_aragon.1 }
        }
    }
}

et_homeland_cleanup = {
    effect = {
        et_homeland_cleanup
    }
}