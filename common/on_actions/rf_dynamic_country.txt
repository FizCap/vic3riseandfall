on_monthly_pulse_country = {
    on_actions = {
        rf_dynamic_country_ai_monthly
        rf_dynamic_country_ai_monthly_unrecognized
    }
}

rf_dynamic_country_ai_monthly = {
    trigger = {
        is_player = no
        has_game_rule = ai_improvement_enabled
        is_at_war = no
        is_subject = no
        is_country_type = recognized
        num_states > 1
        # Performance: only run for countries that have at least one state showing
        # significant turmoil or very low market access (candidates for dynamic country creation)
        any_scope_state = {
            owner = root
            OR = {
                turmoil > 0.30
                market_access < 0.15
            }
        }
    }
    effect = {
        rf_dynamic_country_ai_recognized = yes
    }
}

rf_dynamic_country_ai_monthly_unrecognized = {
    trigger = {
        is_player = no
        has_game_rule = ai_improvement_enabled
        is_at_war = no
        is_subject = no
        is_country_type = unrecognized
        num_states > 1
        # Performance: only run for countries that have at least one state showing
        # significant turmoil or very low market access (candidates for dynamic country creation)
        any_scope_state = {
            owner = root
            OR = {
                turmoil > 0.30
                market_access < 0.15
            }
        }
    }
    effect = {
        rf_dynamic_country_ai_unrecognized = yes
    }
}