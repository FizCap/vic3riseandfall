#############################################
# DYNAMIC COUNTRY FINALIZATION #
#############################################
rf_button_finalize_dynamic_country = {
	# Merged for recognized and unrecognized
	name = "rf_button_finalize_dynamic_country"
	desc = "rf_button_finalize_dynamic_country_desc"

	# Visible for player with builder enabled and marked states
	visible = {
		OR = {
			is_country_type = recognized
			is_country_type = unrecognized
		}
		is_player = yes
		has_variable = rf_dyn_builder_enabled
		any_scope_state = {
			has_decree = decree_rf_mark_state_for_dyn_country
			owner = ROOT
		}
	}

	possible = {
		OR = {
			is_country_type = recognized
			is_country_type = unrecognized
		}
		NOT = { is_subject = yes }
		is_player = yes
		has_variable = rf_dyn_builder_enabled
		any_scope_state = {
			has_decree = decree_rf_mark_state_for_dyn_country
			owner = ROOT
		}
	}

		effect = {
			# Pick a capital among marked states
			random_scope_state = {
				limit = {
					has_decree = decree_rf_mark_state_for_dyn_country
					owner = ROOT
				}
				save_scope_as = rf_dyn_country_capital
			}
			set_variable = rf_dyn_country_capital_found

			# Mark the decree-selected states for ceding
			every_scope_state = {
				limit = {
					has_decree = decree_rf_mark_state_for_dyn_country
					owner = ROOT
				}
				set_variable = dynamic_state_cede
			}

			# Create the dynamic country
			rf_dynamic_country_create = yes
		}

		ai_chance = { value = 0 }
}


rf_button_enable_builder = {
	name = "rf_button_enable_builder"
	desc = "rf_button_enable_builder_desc"
	visible = { 
		is_player = yes
		NOT = { has_variable = rf_dyn_builder_enabled }
	}
	possible = { NOT = { has_variable = rf_dyn_builder_enabled } }
	effect = { set_variable = rf_dyn_builder_enabled }
	ai_chance = { value = 0 }
}

rf_button_disable_builder = {
	name = "rf_button_disable_builder"
	desc = "rf_button_disable_builder_desc"
	visible = { 
		is_player = yes
		has_variable = rf_dyn_builder_enabled
	}
	possible = { has_variable = rf_dyn_builder_enabled }
	effect = {
		remove_variable = rf_dyn_builder_enabled
	}
	ai_chance = { value = 0 }
}

rf_button_authority_cheat_enable = {
	name = "rf_button_authority_cheat_enable"
	desc = "rf_button_authority_cheat_enable_desc"
	visible = {
		is_player = yes
		NOT = { has_variable = rf_authority_cheat_enabled }
	}
	possible = {
		NOT = { has_variable = rf_authority_cheat_enabled }
	}
	effect = {
		add_modifier = rf_authority_cheat
		set_variable = rf_authority_cheat_enabled
	}
	ai_chance = { value = 0 }
}

rf_button_authority_cheat_disable = {
	name = "rf_button_authority_cheat_disable"
	desc = "rf_button_authority_cheat_disable_desc"
	visible = {
		is_player = yes
		has_variable = rf_authority_cheat_enabled
	}
	possible = {
		has_variable = rf_authority_cheat_enabled
	}
	effect = {
		remove_modifier = rf_authority_cheat
		remove_variable = rf_authority_cheat_enabled
	}
	ai_chance = { value = 0 }
}