et_ai_improvement_effect_dynamic = {
    if = {
        limit = {
            has_game_rule = ai_improvement_enabled
            is_ai = yes
        }
        # Use reserve/income ratio for dynamic scaling
        if = {
            limit = { et_reserve_income_ratio > 100 }
            set_government_wage_level = very_low
            set_military_wage_level = very_low
        }
        else_if = {
            limit = { et_reserve_income_ratio > 50 }
            set_government_wage_level = low
            set_military_wage_level = low
        }
        else_if = {
            limit = { et_reserve_income_ratio > 10 }
            set_government_wage_level = medium
            set_military_wage_level = medium
        }
        else_if = {
            limit = { et_reserve_income_ratio > 5 }
            set_government_wage_level = high
            set_military_wage_level = high
        }
        else = {
            set_government_wage_level = very_high
            set_military_wage_level = very_high
        }

        # TEST: If weekly net income is less than 0, add holy_roman_emperor modifier for 1 year
        if = {
            limit = { income > 50000 }
            add_modifier = { name = holy_roman_emperor days = 30 }
        }
        set_variable = { name = et_budget_cooldown days = 30 }

        # Bureaucracy modifier logic always runs
        if = {
            limit = {
                bureaucracy < -10
                NOT = { has_modifier = et_negative_bureaucracy }
            }
            add_modifier = { name = et_negative_bureaucracy days = 365 hidden = yes }
        }
    }
}