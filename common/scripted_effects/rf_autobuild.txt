rf_manual_build_government_administration = {
    #manual build button for the government administration

    # 1) If many states already have admin buildings with good occupancy, expand those (existing behaviour)
    every_scope_state = {
        limit = {
            turmoil < 0.25
            any_scope_building = {
                is_building_type = building_government_administration
                occupancy > 0.50
            }
            can_construct_building = building_government_administration
        }
        start_building_construction = building_government_administration
    }

    # 2) Fallback: if there are states that do NOT have any admin centre and exceed an employment/unemployment threshold,
    #    pick a single eligible state and build one admin centre there. This ensures we only build one new admin centre in
    random_state = {
        limit = {
            turmoil < 0.25
            NOT = {
                any_scope_building = {
                    is_building_type = building_government_administration
                }
            }
            can_construct_building = building_government_administration
            owner = ROOT
            # Only trigger fallback if the country has fewer than 1 total levels of government administration
            # across all states (sum of building levels). Adjust `value` if you want a different threshold.
            country_has_building_type_levels = {
                building = building_government_administration
                value < 1
            }
        }
        start_building_construction = building_government_administration
    }
}

rf_manual_build_railway = {
    #manual build for railway

    every_scope_state = {
        limit = {
            turmoil < 0.50
            infrastructure_delta < 0
            can_construct_building = building_railway
        }
        start_building_construction = building_railway
    }
}

rf_manual_build_port = {
    #manual build port in coastal state with low infrastructure

    every_scope_state = {
        limit = {
            turmoil < 0.50
            infrastructure_delta < 0
            can_construct_building = building_port
        }
        start_building_construction = building_port
    }
}

rf_manual_build_power_plant = {
    #manual build button for power plant (QoL)
    # Build one power plant in every state that does not already have one.

    every_scope_state = {
        limit = {
            turmoil < 0.50
            NOT = {
                any_scope_building = {
                    is_building_type = building_power_plant
                }
            }
            # Only build in this state if there's already at least one profitable power plant here
            any_scope_building = {
                is_building_type = building_power_plant
                weekly_profit > 500
            }
            can_construct_building = building_power_plant
            owner = ROOT
        }
        start_building_construction = building_power_plant
    }

    # Fallback: if the country has no power plants at all, pick a single eligible state and build one there.
    every_scope_state = {
        limit = {
            turmoil < 0.50
            NOT = {
                any_scope_building = {
                    is_building_type = building_power_plant
                }
            }
            can_construct_building = building_power_plant
            owner = ROOT
            country_has_building_type_levels = {
                building = building_power_plant
                value < 1
            }
        }
        start_building_construction = building_power_plant
    }
}

rf_manual_build_construction_sector = {
    # Manual / Auto build for construction sector (prioritised: coastal first, then inland)

    # 1) Preferred pick: choose a coastal state that is improving (infrastructure_delta > 0).
    #    Country cap prevents runaway building (allow up to 2 total construction sector levels).
    # Try coastal candidates first. If any coastal state meets the criteria, pick one and stop.
    if = {
        limit = {
            any_scope_state = {
                limit = {
                    turmoil < 0.50
                    is_coastal = yes
                    infrastructure_delta > 0
                    can_construct_building = building_construction_sector
                    owner = ROOT
                }
            }
        }
        random_state = {
            limit = {
                turmoil < 0.50
                is_coastal = yes
                infrastructure_delta > 0
                can_construct_building = building_construction_sector
                owner = ROOT
            }
            start_building_construction = building_construction_sector
        }
    }
    else = {
        # Fall back script if none are met
        if = {
            limit = {
                any_scope_state = {
                    limit = {
                        turmoil < 0.50
                        can_construct_building = building_construction_sector
                        owner = ROOT
                    }
                }
            }
            random_state = {
                limit = {
                    turmoil < 0.50
                    can_construct_building = building_construction_sector
                    owner = ROOT
                }
                start_building_construction = building_construction_sector
            }
        }
    }
}