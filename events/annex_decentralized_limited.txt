namespace = annex_decentralized_limited

annex_decentralized_limited.1 = {
    hidden = yes

    immediate = {
        if = {
            limit = {
                random_chance = 5
            }
            every_decentralized_country = {
                limit = {
                    num_states <= 3
                    any_scope_state = {
                        any_neighbouring_state = { 
                            owner = {
                                country_type = decentralized
                                trigger_if = {
                                    limit = { ROOT.num_states = 1 }
                                    num_states = 1
                                }
                                trigger_else_if = {
                                    limit = { ROOT.num_states = 2 }
                                    num_states <= 2
                                }
                                trigger_else = {
                                    num_states <= 3
                                }
                            }
                        }
                    }
                }
                save_scope_as = annexing_country
                random_decentralized_country = {
                    limit = {
                        any_scope_state = {
                            any_neighbouring_state = { owner = scope:annexing_country }
                        }
                        if = {
                            limit = { scope:annexing_country.num_states = 1 }
                            num_states = 1
                        }
                        else_if = {
                            limit = { scope:annexing_country.num_states = 2 }
                            num_states <= 2
                        }
                        else = {
                            num_states <= 3
                        }
                    }
                    scope:annexing_country = { annex = PREV }
                }
            }
        }
    }
}

#Credit to CaesarVincens for the script
